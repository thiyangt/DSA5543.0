<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>6&nbsp; Spatial Data Visualisation – DSA 554 3.0 Spatio-temporal Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./refs.html" rel="next">
<link href="./05-chap5.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-47708def744f7d6bf9e6ade08d3fbeef.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dcaec5c8d80e8fa62fc25e24c15f567a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="https://fonts.googleapis.com/css?family=Fira+Sans|Merriweather|Source%20Code%20Pro" rel="stylesheet">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-chap6.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Spatial Data Visualisation</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DSA 554 3.0 Spatio-temporal Data Analysis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Front matter</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-chap1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-chap2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Time Series Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-chap3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Time Series Forecasting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-chap4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Models For Stationary Time Series</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-chap5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fit ARIMA class models using R/ Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-chap6.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Spatial Data Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliography</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title"><b>Sections</b></h2>
   
  <ul class="collapse">
<li><a href="#r-packages-for-spatial-data-analysis" id="toc-r-packages-for-spatial-data-analysis" class="nav-link active" data-scroll-target="#r-packages-for-spatial-data-analysis"><span class="header-section-number">6.1</span> R packages for spatial data analysis</a></li>
  <li><a href="#geospatial-vector-data-structures" id="toc-geospatial-vector-data-structures" class="nav-link" data-scroll-target="#geospatial-vector-data-structures"><span class="header-section-number">6.2</span> Geospatial vector data structures</a></li>
  <li><a href="#challenge-in-spatial-data-viualisation" id="toc-challenge-in-spatial-data-viualisation" class="nav-link" data-scroll-target="#challenge-in-spatial-data-viualisation"><span class="header-section-number">6.3</span> Challenge in Spatial Data Viualisation</a></li>
  <li><a href="#map-projection" id="toc-map-projection" class="nav-link" data-scroll-target="#map-projection"><span class="header-section-number">6.4</span> Map Projection</a></li>
  <li><a href="#types-of-map-projections" id="toc-types-of-map-projections" class="nav-link" data-scroll-target="#types-of-map-projections"><span class="header-section-number">6.5</span> Types of Map Projections</a></li>
  <li><a href="#example-maps" id="toc-example-maps" class="nav-link" data-scroll-target="#example-maps"><span class="header-section-number">6.6</span> Example maps</a></li>
  <li><a href="#why-multiple-map-projection-types-exist" id="toc-why-multiple-map-projection-types-exist" class="nav-link" data-scroll-target="#why-multiple-map-projection-types-exist"><span class="header-section-number">6.7</span> Why Multiple Map Projection Types Exist</a></li>
  <li><a href="#quick-comparison-table" id="toc-quick-comparison-table" class="nav-link" data-scroll-target="#quick-comparison-table"><span class="header-section-number">6.8</span> Quick Comparison Table</a></li>
  <li><a href="#coordinate-reference-system-crs" id="toc-coordinate-reference-system-crs" class="nav-link" data-scroll-target="#coordinate-reference-system-crs"><span class="header-section-number">6.9</span> Coordinate Reference System (CRS)</a></li>
  <li><a href="#what-is-a-datum" id="toc-what-is-a-datum" class="nav-link" data-scroll-target="#what-is-a-datum"><span class="header-section-number">6.10</span> What is a Datum?</a></li>
  <li><a href="#why-is-a-datum-important" id="toc-why-is-a-datum-important" class="nav-link" data-scroll-target="#why-is-a-datum-important"><span class="header-section-number">6.11</span> Why is a Datum Important?</a></li>
  <li><a href="#projection-vs-crs" id="toc-projection-vs-crs" class="nav-link" data-scroll-target="#projection-vs-crs"><span class="header-section-number">6.12</span> Projection vs CRS</a></li>
  <li><a href="#shapefile" id="toc-shapefile" class="nav-link" data-scroll-target="#shapefile"><span class="header-section-number">6.13</span> Shapefile</a></li>
  <li><a href="#r-example" id="toc-r-example" class="nav-link" data-scroll-target="#r-example"><span class="header-section-number">6.14</span> R Example</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Spatial Data Visualisation</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="r-packages-for-spatial-data-analysis" class="level2" data-number="6.1"><h2 data-number="6.1" class="anchored" data-anchor-id="r-packages-for-spatial-data-analysis">
<span class="header-section-number">6.1</span> R packages for spatial data analysis</h2>
<ul>
<li><p>rgdal</p></li>
<li><p>sp</p></li>
<li><p>rgeos</p></li>
<li><p>raster</p></li>
<li><p>sf</p></li>
<li><p>tmap</p></li>
<li><p>leaflet</p></li>
<li><p>ggmap</p></li>
<li><p>maptools</p></li>
<li><p>gstat</p></li>
<li><p>spatstat</p></li>
<li><p>stars</p></li>
<li><p>geosphere</p></li>
<li><p>RgoogleMaps</p></li>
<li><p>rasterVis</p></li>
</ul></section><section id="geospatial-vector-data-structures" class="level2" data-number="6.2"><h2 data-number="6.2" class="anchored" data-anchor-id="geospatial-vector-data-structures">
<span class="header-section-number">6.2</span> Geospatial vector data structures</h2>
<ul>
<li>
<p>Point: Individual longitude and latitude of locations</p>
<p>Eg: Locations, Buildings</p>
</li>
<li>
<p>Lines: Two or more vertices or points that are connected</p>
<p>Eg: Roads, rivers</p>
</li>
<li>
<p>Polygons: Three or more vertices and closed</p>
<p>Eg: Area of a country, state, district</p>
</li>
</ul></section><section id="challenge-in-spatial-data-viualisation" class="level2" data-number="6.3"><h2 data-number="6.3" class="anchored" data-anchor-id="challenge-in-spatial-data-viualisation">
<span class="header-section-number">6.3</span> Challenge in Spatial Data Viualisation</h2>
<p>Move from</p>
<p><img src="https://media.tenor.com/4A4UHbVtBIIAAAAC/globe-world.gif" class="img-fluid"></p>
<p>to</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-chap6_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p>How to transform this three dimensional angular system to a two dimensional cartesian system?</p>
<p>Solution: Spatial Projections</p>
</section><section id="map-projection" class="level2" data-number="6.4"><h2 data-number="6.4" class="anchored" data-anchor-id="map-projection">
<span class="header-section-number">6.4</span> Map Projection</h2>
<ul>
<li><p>A projection is about the geometric transformation from 3D to 2D.</p></li>
<li><p>A map projection is a method or mathematical formula to represent the curved surface of the Earth on a flat map.</p></li>
<li><p>It focuses on how the Earth’s surface is “flattened”, which always introduces some distortion in area, shape, distance, or direction.</p></li>
</ul>
<p>Examples:</p>
<p>Mercator (preserves direction)</p>
<p>Albers Equal-Area Conic (preserves area)</p>
<p>Goode Homolosine (minimizes distortion globally)</p>
</section><section id="types-of-map-projections" class="level2" data-number="6.5"><h2 data-number="6.5" class="anchored" data-anchor-id="types-of-map-projections">
<span class="header-section-number">6.5</span> Types of Map Projections</h2>
<section id="cylindrical-projections" class="level3"><h3 class="anchored" data-anchor-id="cylindrical-projections">Cylindrical Projections</h3>
<p>Imagine wrapping a cylinder around the Earth and projecting the surface onto it.</p>
<p>Characteristics:</p>
<p>Meridians and parallels are straight and perpendicular.</p>
<p>Distortion increases away from the equator.</p>
<p>Example:</p>
<p>Mercator Projection – preserves direction, but greatly distorts area near the poles.</p>
</section><section id="conical-projections" class="level3"><h3 class="anchored" data-anchor-id="conical-projections">Conical Projections</h3>
<p>Imagine wrapping a cone over the Earth, usually touching at one or two standard parallels.</p>
<p>Characteristics:</p>
<p>Parallels appear as arcs; meridians converge toward a point.</p>
<p>Best for mid-latitude regions with an east–west extent.</p>
<p>Example:</p>
<p>Albers Equal-Area Conic – preserves area, commonly used for countries or regions.</p>
</section><section id="planar-azimuthal-projections" class="level3"><h3 class="anchored" data-anchor-id="planar-azimuthal-projections">Planar (Azimuthal) Projections</h3>
<p>The Earth’s surface is projected onto a flat plane, usually touching at a single point.</p>
<p>Characteristics:</p>
<p>Distortion increases outward from the point of tangency.</p>
<p>Can preserve distance, area, or shape depending on the type.</p>
<p>Example:</p>
<p>Goode Homolosine – minimizes global distortion by combining multiple projection methods.</p>
<p>Visit <a href="https://johnedevans.files.wordpress.com/2019/01/map-projections-explained.jpg">here</a> to see the visual illustration.</p>
</section></section><section id="example-maps" class="level2" data-number="6.6"><h2 data-number="6.6" class="anchored" data-anchor-id="example-maps">
<span class="header-section-number">6.6</span> Example maps</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-chap6_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-chap6_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-chap6_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-chap6_files/figure-html/unnamed-chunk-4-4.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section><section id="why-multiple-map-projection-types-exist" class="level2" data-number="6.7"><h2 data-number="6.7" class="anchored" data-anchor-id="why-multiple-map-projection-types-exist">
<span class="header-section-number">6.7</span> Why Multiple Map Projection Types Exist</h2>
<p>The Earth is round, but maps are flat. Because no flat map can perfectly preserve all properties of the globe, every projection introduces some distortion. Different projections are therefore designed to preserve certain properties depending on the map’s purpose.</p>
<section id="key-reasons-for-multiple-projection-types" class="level3"><h3 class="anchored" data-anchor-id="key-reasons-for-multiple-projection-types">Key Reasons for Multiple Projection Types</h3>
<ol type="1">
<li>Different Types of Distortion</li>
</ol>
<p>Shape (conformal) – keeps angles and shapes correct (e.g., Mercator).</p>
<p>Area (equal-area / equivalent) – keeps relative sizes correct (e.g., Albers Equal-Area Conic).</p>
<p>Distance (equidistant) – preserves distances from a point or along certain lines (e.g., Azimuthal Equidistant).</p>
<p>Direction (azimuthal / navigational) – preserves angles and compass bearings (e.g., Mercator for navigation).</p>
<ol start="2" type="1">
<li>Geographical Focus</li>
</ol>
<p>Some projections are better for global maps, others for regional or local maps.</p>
<p>Example: Conical projections work well for mid-latitude countries, while planar projections work for polar regions.</p>
<ol start="3" type="1">
<li>Practical Applications</li>
</ol>
<p>Navigation – need accurate direction → Mercator.</p>
<p>Thematic / statistical maps – need accurate area → Albers Equal-Area.</p>
<p>Minimizing overall distortion – Goode Homolosine for global thematic maps.</p>
</section></section><section id="quick-comparison-table" class="level2" data-number="6.8"><h2 data-number="6.8" class="anchored" data-anchor-id="quick-comparison-table">
<span class="header-section-number">6.8</span> Quick Comparison Table</h2>
<p>In-class</p>
</section><section id="coordinate-reference-system-crs" class="level2" data-number="6.9"><h2 data-number="6.9" class="anchored" data-anchor-id="coordinate-reference-system-crs">
<span class="header-section-number">6.9</span> Coordinate Reference System (CRS)</h2>
<p>A CRS is a complete spatial reference framework that defines:</p>
<ul>
<li>
<p>How coordinates relate to the Earth (datum)</p>
<p>A datum defines the mathematical Earth model and reference point for coordinates, ensuring that latitude, longitude, and height correspond to real positions on the Earth.)</p>
</li>
<li><p>The map projection used (if any)</p></li>
</ul></section><section id="what-is-a-datum" class="level2" data-number="6.10"><h2 data-number="6.10" class="anchored" data-anchor-id="what-is-a-datum">
<span class="header-section-number">6.10</span> What is a Datum?</h2>
<p>A datum is a mathematical model of the Earth that defines:</p>
<p>The size and shape of the Earth (ellipsoid or spheroid)</p>
<p>The origin and orientation of the coordinate system (where latitude 0°, longitude 0° are defined)</p>
<p>In short, a datum tells us where “zero” is and how the coordinates are measured on the Earth’s surface.</p>
</section><section id="why-is-a-datum-important" class="level2" data-number="6.11"><h2 data-number="6.11" class="anchored" data-anchor-id="why-is-a-datum-important">
<span class="header-section-number">6.11</span> Why is a Datum Important?</h2>
<p>Different datums model the Earth slightly differently, so the same latitude/longitude may correspond to different locations depending on the datum.</p>
<p>Example:</p>
<p>WGS84 → used by GPS</p>
<p>NAD83 → used in North America</p>
<p>A coordinate of 40°N, 75°W will be slightly different on WGS84 vs NAD83 because the reference ellipsoid is slightly shifted.</p>
</section><section id="projection-vs-crs" class="level2" data-number="6.12"><h2 data-number="6.12" class="anchored" data-anchor-id="projection-vs-crs">
<span class="header-section-number">6.12</span> Projection vs CRS</h2>
<ul>
<li><p>Projection = method to flatten the Earth</p></li>
<li><p>CRS = full system that defines the Earth model + projection + coordinate rules</p></li>
</ul></section><section id="shapefile" class="level2" data-number="6.13"><h2 data-number="6.13" class="anchored" data-anchor-id="shapefile">
<span class="header-section-number">6.13</span> Shapefile</h2>
<p>A shapefile is a popular geospatial vector data format used to store geographic features like points, lines, and polygons, along with their attributes. It’s commonly used in GIS (Geographic Information Systems) and mapping software, including R (sf or rgdal packages).</p>
<p>A shapefile actually consists of several files that work together. The main ones are:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 64%">
<col style="width: 36%">
</colgroup>
<thead><tr class="header">
<th>File Extension</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>.shp</td>
<td>Geometry of features (points, lines, polygons)</td>
</tr>
<tr class="even">
<td>.shx</td>
<td>Shape index (helps software find features quickly)</td>
</tr>
<tr class="odd">
<td>.dbf</td>
<td>Attribute data (like a spreadsheet)</td>
</tr>
<tr class="even">
<td>.prj</td>
<td>Projection information (coordinate reference system)</td>
</tr>
<tr class="odd">
<td>.cpg</td>
<td>Encoding of text attributes (optional)</td>
</tr>
</tbody>
</table></section><section id="r-example" class="level2" data-number="6.14"><h2 data-number="6.14" class="anchored" data-anchor-id="r-example">
<span class="header-section-number">6.14</span> R Example</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 168 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -73.36621 ymin: -22.40205 xmax: 109.4449 ymax: 41.9062
Geodetic CRS:  WGS 84
       featurecla scalerank labelrank sovereignt sov_a3 adm0_dif level
1 Admin-0 country         1         3   Zimbabwe    ZWE        0     2
2 Admin-0 country         1         3     Zambia    ZMB        0     2
3 Admin-0 country         1         3      Yemen    YEM        0     2
4 Admin-0 country         3         2    Vietnam    VNM        0     2
5 Admin-0 country         5         3  Venezuela    VEN        0     2
6 Admin-0 country         6         6    Vatican    VAT        0     2
               type tlc     admin adm0_a3 geou_dif   geounit gu_a3 su_dif
1 Sovereign country   1  Zimbabwe     ZWE        0  Zimbabwe   ZWE      0
2 Sovereign country   1    Zambia     ZMB        0    Zambia   ZMB      0
3 Sovereign country   1     Yemen     YEM        0     Yemen   YEM      0
4 Sovereign country   1   Vietnam     VNM        0   Vietnam   VNM      0
5 Sovereign country   1 Venezuela     VEN        0 Venezuela   VEN      0
6 Sovereign country   1   Vatican     VAT        0   Vatican   VAT      0
    subunit su_a3 brk_diff      name name_long brk_a3  brk_name brk_group
1  Zimbabwe   ZWE        0  Zimbabwe  Zimbabwe    ZWE  Zimbabwe      &lt;NA&gt;
2    Zambia   ZMB        0    Zambia    Zambia    ZMB    Zambia      &lt;NA&gt;
3     Yemen   YEM        0     Yemen     Yemen    YEM     Yemen      &lt;NA&gt;
4   Vietnam   VNM        0   Vietnam   Vietnam    VNM   Vietnam      &lt;NA&gt;
5 Venezuela   VEN        0 Venezuela Venezuela    VEN Venezuela      &lt;NA&gt;
6   Vatican   VAT        0   Vatican   Vatican    VAT   Vatican      &lt;NA&gt;
  abbrev postal                        formal_en
1  Zimb.     ZW             Republic of Zimbabwe
2 Zambia     ZM               Republic of Zambia
3   Yem.     YE                Republic of Yemen
4  Viet.     VN    Socialist Republic of Vietnam
5   Ven.     VE Bolivarian Republic of Venezuela
6   Vat.      V        State of the Vatican City
                           formal_fr              name_ciawf note_adm0 note_brk
1                               &lt;NA&gt;                Zimbabwe      &lt;NA&gt;     &lt;NA&gt;
2                               &lt;NA&gt;                  Zambia      &lt;NA&gt;     &lt;NA&gt;
3                               &lt;NA&gt;                   Yemen      &lt;NA&gt;     &lt;NA&gt;
4                               &lt;NA&gt;                 Vietnam      &lt;NA&gt;     &lt;NA&gt;
5 República Bolivariana de Venezuela               Venezuela      &lt;NA&gt;     &lt;NA&gt;
6                               &lt;NA&gt; Holy See (Vatican City)      &lt;NA&gt;     &lt;NA&gt;
           name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13  pop_est
1           Zimbabwe     &lt;NA&gt;         1         5         3          9 14645468
2             Zambia     &lt;NA&gt;         5         8         5         13 17861030
3        Yemen, Rep.     &lt;NA&gt;         5         3         3         11 29161922
4            Vietnam     &lt;NA&gt;         5         6         5          4 96462106
5      Venezuela, RB     &lt;NA&gt;         1         3         1          4 28515829
6 Vatican (Holy See) Holy See         1         3         4          2      825
  pop_rank pop_year gdp_md gdp_year                    economy
1       14     2019  21440     2019    5. Emerging region: G20
2       14     2019  23309     2019  7. Least developed region
3       15     2019  22581     2019  7. Least developed region
4       16     2019 261921     2019    5. Emerging region: G20
5       15     2019 482359     2014    5. Emerging region: G20
6        2     2019    -99     2019 2. Developed region: nonG7
               income_grp fips_10 iso_a2 iso_a2_eh iso_a3 iso_a3_eh iso_n3
1           5. Low income      ZI     ZW        ZW    ZWE       ZWE    716
2  4. Lower middle income      ZA     ZM        ZM    ZMB       ZMB    894
3  4. Lower middle income      YM     YE        YE    YEM       YEM    887
4  4. Lower middle income      VM     VN        VN    VNM       VNM    704
5  3. Upper middle income      VE     VE        VE    VEN       VEN    862
6 2. High income: nonOECD      VT     VA        VA    VAT       VAT    336
  iso_n3_eh un_a3 wb_a2 wb_a3   woe_id woe_id_eh                   woe_note
1       716   716    ZW   ZWE 23425004  23425004 Exact WOE match as country
2       894   894    ZM   ZMB 23425003  23425003 Exact WOE match as country
3       887   887    RY   YEM 23425002  23425002 Exact WOE match as country
4       704   704    VN   VNM 23424984  23424984 Exact WOE match as country
5       862   862    VE   VEN 23424982  23424982 Exact WOE match as country
6       336   336   -99   -99 23424986  23424986 Exact WOE match as country
  adm0_iso adm0_diff adm0_tlc adm0_a3_us adm0_a3_fr adm0_a3_ru adm0_a3_es
1      ZWE      &lt;NA&gt;      ZWE        ZWE        ZWE        ZWE        ZWE
2      ZMB      &lt;NA&gt;      ZMB        ZMB        ZMB        ZMB        ZMB
3      YEM      &lt;NA&gt;      YEM        YEM        YEM        YEM        YEM
4      VNM      &lt;NA&gt;      VNM        VNM        VNM        VNM        VNM
5      VEN      &lt;NA&gt;      VEN        VEN        VEN        VEN        VEN
6      VAT      &lt;NA&gt;      VAT        VAT        VAT        VAT        VAT
  adm0_a3_cn adm0_a3_tw adm0_a3_in adm0_a3_np adm0_a3_pk adm0_a3_de adm0_a3_gb
1        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3        YEM        YEM        YEM        YEM        YEM        YEM        YEM
4        VNM        VNM        VNM        VNM        VNM        VNM        VNM
5        VEN        VEN        VEN        VEN        VEN        VEN        VEN
6        VAT        VAT        VAT        VAT        VAT        VAT        VAT
  adm0_a3_br adm0_a3_il adm0_a3_ps adm0_a3_sa adm0_a3_eg adm0_a3_ma adm0_a3_pt
1        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3        YEM        YEM        YEM        YEM        YEM        YEM        YEM
4        VNM        VNM        VNM        VNM        VNM        VNM        VNM
5        VEN        VEN        VEN        VEN        VEN        VEN        VEN
6        VAT        VAT        VAT        VAT        VAT        VAT        VAT
  adm0_a3_ar adm0_a3_jp adm0_a3_ko adm0_a3_vn adm0_a3_tr adm0_a3_id adm0_a3_pl
1        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3        YEM        YEM        YEM        YEM        YEM        YEM        YEM
4        VNM        VNM        VNM        VNM        VNM        VNM        VNM
5        VEN        VEN        VEN        VEN        VEN        VEN        VEN
6        VAT        VAT        VAT        VAT        VAT        VAT        VAT
  adm0_a3_gr adm0_a3_it adm0_a3_nl adm0_a3_se adm0_a3_bd adm0_a3_ua adm0_a3_un
1        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        -99
2        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        -99
3        YEM        YEM        YEM        YEM        YEM        YEM        -99
4        VNM        VNM        VNM        VNM        VNM        VNM        -99
5        VEN        VEN        VEN        VEN        VEN        VEN        -99
6        VAT        VAT        VAT        VAT        VAT        VAT        -99
  adm0_a3_wb     continent region_un          subregion
1        -99        Africa    Africa     Eastern Africa
2        -99        Africa    Africa     Eastern Africa
3        -99          Asia      Asia       Western Asia
4        -99          Asia      Asia South-Eastern Asia
5        -99 South America  Americas      South America
6        -99        Europe    Europe    Southern Europe
                   region_wb name_len long_len abbrev_len tiny homepart
1         Sub-Saharan Africa        8        8          5  -99        1
2         Sub-Saharan Africa        6        6          6  -99        1
3 Middle East &amp; North Africa        5        5          4  -99        1
4        East Asia &amp; Pacific        7        7          5    2        1
5  Latin America &amp; Caribbean        9        9          4  -99        1
6      Europe &amp; Central Asia        7        7          4    4        1
  min_zoom min_label max_label   label_x    label_y      ne_id wikidataid
1        0       2.5       8.0  29.92544 -18.911640 1159321441       Q954
2        0       3.0       8.0  26.39530 -14.660804 1159321439       Q953
3        0       3.0       8.0  45.87438  15.328226 1159321425       Q805
4        0       2.0       7.0 105.38729  21.715416 1159321417       Q881
5        0       2.5       7.5 -64.59938   7.182476 1159321411       Q717
6        0       5.0      10.0  12.45342  41.903323 1159321407       Q237
    name_ar       name_bn      name_de      name_en             name_es
1  زيمبابوي      জিম্বাবুয়ে     Simbabwe     Zimbabwe            Zimbabue
2    زامبيا       জাম্বিয়া       Sambia       Zambia              Zambia
3     اليمن        ইয়েমেন        Jemen        Yemen               Yemen
4    فيتنام      ভিয়েতনাম      Vietnam      Vietnam             Vietnam
5   فنزويلا     ভেনেজুয়েলা    Venezuela    Venezuela           Venezuela
6 الفاتيكان ভ্যাটিকান সিটি Vatikanstadt Vatican City Ciudad del Vaticano
   name_fa         name_fr    name_el       name_he   name_hi   name_hu
1 زیمبابوه        Zimbabwe Ζιμπάμπουε      זימבבואה   ज़िम्बाब्वे  Zimbabwe
2   زامبیا          Zambie     Ζάμπια         זמביה   ज़ाम्बिया    Zambia
3      یمن           Yémen     Υεμένη          תימן       यमन     Jemen
4   ویتنام        Viêt Nam    Βιετνάμ       וייטנאם   वियतनाम   Vietnám
5  ونزوئلا       Venezuela Βενεζουέλα       ונצואלה    वेनेज़ुएला Venezuela
6  واتیکان Cité du Vatican   Βατικανό קריית הוותיקן वैटिकन नगर   Vatikán
    name_id            name_it    name_ja     name_ko      name_nl   name_pl
1  Zimbabwe           Zimbabwe ジンバブエ    짐바브웨     Zimbabwe  Zimbabwe
2    Zambia             Zambia   ザンビア      잠비아       Zambia    Zambia
3     Yaman              Yemen   イエメン        예멘        Jemen     Jemen
4   Vietnam            Vietnam   ベトナム      베트남      Vietnam   Wietnam
5 Venezuela          Venezuela ベネズエラ  베네수엘라    Venezuela Wenezuela
6   Vatikan Città del Vaticano   バチカン 바티칸 시국 Vaticaanstad   Watykan
    name_pt   name_ru       name_sv   name_tr   name_uk    name_ur
1  Zimbábue  Зимбабве      Zimbabwe  Zimbabve  Зімбабве    زمبابوے
2    Zâmbia    Замбия        Zambia   Zambiya    Замбія     زیمبیا
3     Iémen     Йемен         Jemen     Yemen      Ємен        یمن
4  Vietname   Вьетнам       Vietnam   Vietnam   В'єтнам     ویتنام
5 Venezuela Венесуэла     Venezuela Venezuela Венесуела  وینیزویلا
6  Vaticano   Ватикан Vatikanstaten   Vatikan   Ватикан ویٹیکن سٹی
        name_vi  name_zh name_zht      fclass_iso tlc_diff      fclass_tlc
1      Zimbabwe 津巴布韦   辛巴威 Admin-0 country     &lt;NA&gt; Admin-0 country
2        Zambia   赞比亚   尚比亞 Admin-0 country     &lt;NA&gt; Admin-0 country
3         Yemen     也门     葉門 Admin-0 country     &lt;NA&gt; Admin-0 country
4      Việt Nam     越南     越南 Admin-0 country     &lt;NA&gt; Admin-0 country
5     Venezuela 委内瑞拉 委內瑞拉 Admin-0 country     &lt;NA&gt; Admin-0 country
6 Thành Vatican   梵蒂冈   梵蒂岡 Admin-0 country     &lt;NA&gt; Admin-0 country
  fclass_us fclass_fr fclass_ru fclass_es fclass_cn fclass_tw fclass_in
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
  fclass_np fclass_pk fclass_de fclass_gb fclass_br fclass_il fclass_ps
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
  fclass_sa fclass_eg fclass_ma fclass_pt fclass_ar fclass_jp fclass_ko
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
  fclass_vn fclass_tr fclass_id fclass_pl fclass_gr fclass_it fclass_nl
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
  fclass_se fclass_bd fclass_ua                       geometry
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((31.28789 -2...
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((30.39609 -1...
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((53.08564 16...
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((104.064 10....
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((-60.82119 9...
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((12.43916 41...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./05-chap5.html" class="pagination-link" aria-label="Fit ARIMA class models using R/ Python">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fit ARIMA class models using R/ Python</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./refs.html" class="pagination-link" aria-label="Bibliography">
        <span class="nav-page-text">Bibliography</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>